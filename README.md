# Wallet — MVVM кошелёк для фиата и криптовалют

Приложение полностью переработано под архитектуру MVVM и расширено до функционального кошелька, который комбинирует работу с традиционными валютами и цифровыми активами. Интерфейс построен на SwiftUI и поддерживает PIN/биометрическую аутентификацию.

## Возможности

- Хранение нескольких счетов с разными валютами (фиат и крипто) и кастомными иконками/цветами.
- Поддержка популярных валют: USD, EUR, RUB, GBP, CHF, BTC, ETH, USDT, BNB, SOL.
- Быстрые переводы между счётом и контактом из адресной книги с указанием суммы и комментария.
- Пополнение счетов (fiat & crypto) с фиксацией операции в истории.
- Автоматический расчёт совокупной стоимости активов в базовой валюте (USD по умолчанию).
- История операций (входящие/исходящие транзакции) с отображением меток, дат и комментариев.
- Настраиваемая PIN-панель с поддержкой Face ID / Touch ID.
- Асинхронная загрузка контактов через `ContactService`.

## Архитектура

Структура проекта организована по слоям MVVM:

```
wallet/
├── Models/          // Currency, Account, Transaction, draft-модели
├── Services/        // ExchangeRateService, ContactService, AuthenticationService
├── ViewModels/      // AuthenticationViewModel, WalletViewModel
├── Views/           // WalletView и вложенные представления
├── PinCodeView.swift
├── Hex.swift        // вспомогательное расширение для цветов
├── ContentView.swift
└── walletApp.swift
```

- **Models** — типы данных и вспомогательные структуры (включая тестовые данные и конвертацию).
- **Services** — изолированные сервисы для курсов валют, контактов и биометрии.
- **ViewModels** — `ObservableObject`-слой, инкапсулирующий бизнес-логику и состояние UI.
- **Views** — чистые SwiftUI-представления, подписанные на состояние из view model’ей.

## Как запустить

1. Откройте папку `wallet` в Xcode 15+ через `File > Open`.
2. Если проект ещё не сконфигурирован, создайте цель SwiftUI App и подключите файлы из папки `wallet` (Xcode предложит создать `.xcodeproj` автоматически).
3. Соберите и запустите приложение на симуляторе или устройстве с iOS 16+.
4. При первом запуске дождитесь появления PIN-экрана, введите `1234` или пройдите Face ID/Touch ID.

> Для загрузки контактов необходимо выдать приложению доступ в системном диалоге. Если доступ не выдан, можно вводить получателя перевода вручную.

## Навигация по коду

- `walletApp.swift` — точка входа, подключающая `ContentView`.
- `ContentView.swift` — корневой контейнер, который предъявляет `WalletView` и управляет аутентификацией.
- `Views/WalletView.swift` — основной экран кошелька с секциями суммарных активов, счетов, переводов и истории операций.
- `ViewModels/WalletViewModel.swift` — бизнес-логика кошелька: операции с счетами, CRUD транзакций, интеграция с сервисами.
- `ViewModels/AuthenticationViewModel.swift` и `PinCodeView.swift` — логика и UI блокировки приложения.
- `Services/ExchangeRateService.swift` — преобразование сумм между валютами (заглушечные курсы, их легко заменить интеграцией с API).
- `Services/ContactService.swift` — асинхронная работа с `Contacts.framework`.
- `Models/*.swift` — типы доменной области и тестовые данные для предпросмотра.

## Как расширять

- Подключить реальный API курсов, переопределив `ExchangeRateServiceProtocol`.
- Добавить отдельные экраны детализации транзакций или графики балансов.
- Сохранение состояния в `CoreData`/`Realm` или синхронизация через сеть.
- Расширить систему категорий операций и добавить аналитику расходов.

## Требования

- Xcode 15 или выше.
- iOS 16+ или macOS 13+ (SwiftUI).
- Доступ к контактам (по желанию) для автоподстановки получателей.

Проект готов к дальнейшему масштабированию: MVVM-слой и сервисы выделены и покрывают базовый сценарий мультивалютного кошелька. Удачной разработки!
